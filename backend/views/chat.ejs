<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="/styles/chat.css" />
    <title>Chat</title>
  </head>
  <body>
    <div class="heading">
        <h1>Chat with matches</h1>
        <% if (user) { %>

          <a href="#" class="switch-link" data-user="<%=user%>">
            <img
              class="match-image profile-link"
              src="https://avatars1.githubusercontent.com/u/11157347?s=460&v=4"
              alt="<%=user%>"
            />
          </a>
      <% } %>
        <form action="/" method="post" class="popup-profiles hidden">
          <input id="username" class="hidden displaynone username" type="text" value="" name="username" autocomplete="off" required="required" />
          <button type="submit" class="switch-button">Charlie</button>
        </form>
    </div>
    <div class="all-matches-container">
    <% if (newMatches.length > 0) { %>
    <h2>
      New matches <span class="number-of-matches"><%=newMatches.length%></span>
    </h2>

    <ul class="new-match-container">
      <% if (newMatches) { newMatches.forEach(function(match) { %>
      <li
        class="new-match-container-item"
        data-room="<%=match.roomID%>"
        data-img="<%=match.herImage%>"
        data-name="<%=match.name%>"
      >
        <a href="chat/<%=match.roomID%>">
          <img
            class="new-match-image"
            src="<%=match.herImage%>"
            alt="<%=match.name%>"
          />
          <p><%=match.name%></p>
        </a>
      </li>
      <% })} %>
    </ul>
    <% } %>
    <h2>Messages</h2>
    <ul class="match-block-container">
      <% if (oldMatches) { oldMatches.forEach(function(match) { %>
      <li
        class="match-block-link"
        data-room="<%=match.roomID%>"
        data-img="<%=match.herImage%>"
        data-name="<%=match.name%>"
      >
        <a class="match-block" href="/chat/<%=match.roomID%>">
          <img
            class="match-image"
            src="<%=match.herImage%>"
            alt="<%=match.name%>"
          />
          <div class="match-block-text">
            <h3 class="match-name"><%=match.name%></h3>
            <p class="last-message"><%=match.lastMessage%></p>
          </div>
        </a>
      </li>
      <% })} %>
    </ul>
  </div>

  <div class="all-matches-container slide">
      <h2>Messages</h2>
    <ul class="janno-block-container">
        <li
        class="match-block-link"
        data-room="match-charlie-Janno-5e6fbd3f38f8fc7b1ce48165"
        data-img="https://avatars1.githubusercontent.com/u/11157347?s=460&v=4"
        data-name="Janno"
      >
      <a class="match-block" href="#">
        <img
          class="match-image"
          src="https://avatars1.githubusercontent.com/u/11157347?s=460&v=4"
          alt="Janno"
        />
        <div class="match-block-text">
          <h3 class="match-name">Janno</h3>
          <p class="last-message">hey ik ben charlie</p>
        </div>
      </a>
    </li>
  </ul>
  </div>

    <div class="chat-area down">
      <div class="chat-title">
        <button class="back-button"></button>
        <img
          class="match-image chat-img"
          src="https://cdn130.picsart.com/274506323021201.jpg?r1024x1024"
          alt=""
        />
        <h3 class="match-name chat-name">A girls name</h3>
        <button class="unmatch-heart">ğŸ’”</button>
        <div class="unmatch-question hidden">
          <p>Are you sure you want to unmatch?</p>
          <div>
            <button class="yea-unmatch">yes</button>
            <button class="dont-unmatch">no</button>
          </div>
        </div>
      </div>
      <ul class="chat-container">
        <li class="prompt">
          <p>Send a message and she might actually reply</p>
        </li>
      </ul>

      <div class="input-container">
        <input class="input" type="text" placeholder="send a message" />
        <button class="send">send</button>
      </div>
    </div>
    <p class="unmatch-popup hidden">
      you have unmatched <span class="unmatched-person">Baby</span>
    </p>
    <script src="/socket.io/socket.io.js"></script>
    <script src="/scripts/client-socket.js"></script>
  </body>
</html>
